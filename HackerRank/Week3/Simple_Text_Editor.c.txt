#include <stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>

#define MAX_LEN 1000000
typedef struct {
    char *str;
}State;

char* my_strdup(const char *s) {
    char *copy = malloc(strlen(s) + 1);
    if (copy) strcpy(copy, s);
    return copy;
}

int main() {

    int Q;
    scanf("%d", &Q);
    
    char S[MAX_LEN + 1] = "";
    State stack[Q];
    int top = -1;
    
    while(Q--){
        int type;
        scanf("%d", &type);
        
        if(type == 1){
            char W[1000001];
            scanf("%s",W);
            stack[++top].str = my_strdup(S);
            strcat(S,W);
        }
        else if(type == 2){
            int K;
            scanf("%d",&K);
            stack[++top].str = my_strdup(S);
            int len = strlen(S);
            S[len - K]='\0';
            
        }
        else if(type == 3){
            int K;
            scanf("%d",&K);
            printf("%c\n", S[K-1]);
        }
        else if (type == 4) {
            // Undo operation
            strcpy(S, stack[top].str);
            free(stack[top].str);
            top--;
        
        }
    }
    return 0;
}
